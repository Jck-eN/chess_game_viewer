{% extends 'base.html' %}

{% block nav-index %}
    <a class="nav-link active" href="{% url 'chess_viewer:index' %}">Lista partii </a>
{% endblock %}

{% block content %}
    <div class="my-4">
    <span class="text-center">
    <h2 class="mb-3">Baza partii </h2>

    </span>
        <div class="card">
            <div class="card-body">
                <form novalidate>
                    <div class="form-row d-flex justify-content-center">
                        <div class="col-md-5 mb-3">
                            <label for="gamelastname">Nazwisko</label>
                            <input type="text" class="form-control" id="gamelastname" value="">

                        </div>
                        <div class="col-md-5 mb-3">
                            <label for="gameclub">Klub</label>
                            <input type="text" class="form-control" id="gameclub">

                        </div>
                    </div>
                    <div class="form-row d-flex justify-content-center">

                        <div class="col-md-3 mb-3">
                            <label for="tournamentdate">Data partii</label>
                            <input type="date" class="form-control" id="tournamentdate">

                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="tournamentcity">Nazwa turnieju</label>
                            <input type="text" class="form-control" id="tournamentcity">

                        </div>
                        <div class="col-md-3 mb-3">

                            <label for="tournamenttype">Rodzaj partii</label>
                            <select class="custom-select" id="tournamenttype">
                                <option selected value="">...</option>
                                <option>Klasyczna</option>
                                <option>Szybkia</option>
                                <option>Błyskawiczna</option>
                            </select>
                        </div>

                    </div>
                    <div class="form-row d-flex justify-content-center">
                        <button class="btn btn-info px-5" type="submit">Filtruj</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div class="list-group ">
        {% for game in object_list %}
            <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
               href="{% url 'chess_viewer:game' game.id %}">
            <span class="">
                <div class="">
                    <b> {{ game.white_player.first_name }} {{ game.white_player.last_name }}
                                - {{ game.black_player.first_name }} {{ game.black_player.last_name }}
                        </b>
                </div>
                {% if game.preview %}
                    <div class=""> {{ game.preview |truncatechars:60 }}</div>
                {% endif %}
                {% if game.result %}

                    <span class="badge badge-secondary">{% if game.result == 0 %}0:1
                        {% elif game.result == 0.5 %}&frac12;:&frac12;{% else %}1:0{% endif %}</span>
                {% endif %}
            </span>

                {% if game.tournament %}
                    <span class="text-right">
                <div class=""><b>{{ game.tournament.name |truncatechars:100 }}</b></div>
                <div class=""><b>
                    {% if game.tournament.date %}
                        {{ game.tournament.date }}{% endif %}</b>
                </div>
                <div class="">
                    <span class="badge badge-info">{% if tournament.type == 's' %}szachy szybkie:
                    {% elif tournament.type == 'b' %}szachy błyskawiczne: {% else %}szachy klasyczne: {% endif %}
                        {% if game.tournament.time and game.tournament.time_add %}
                            P{{ game.tournament.time | floatformat }}'+{{ game.tournament.time_add | floatformat }}''
                        {% endif %}
                    </span>
                </div>
            </span>
                {% endif %}
            </a>
        {% endfor %}

    </div>
    {% include "partial/pagination.html" %}
{% endblock %}